<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<button>click</button>
	<script type="text/javascript">
		var btn = document.querySelectorAll("button")[0];
		btn.addEventListener("click",debounce(function(){console.log(this)},1000,false))
		function debounce(fn,time,immediate){
			let timer = null;
			return function(){
				let context = this;
				let args = arguments;
				if(timer){
					clearTimeout(timer)
				}
				if(immediate){
					!timer?fn.call(context,...args):false
					timer = setTimeout(()=>{
						timer = null;	
					},time)
				}else{
					timer = setTimeout(()=>{
						timer = null;	
						fn.call(context,...args)
					},time)
				}
			}
		}
	</script>
</body>
</html>